:root{
  --bg:#0b0f14; --panel:#121923; --panel2:#0f1620; --text:#e9eef6; --muted:#9aa7b6;
  --accent:#5b8cff; --border:#243041; --danger:#ff5b6a; --good:#2dd4bf;
  --shadow: 0 10px 30px rgba(0,0,0,.35);
  --radius:14px;
  --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}
*{box-sizing:border-box}
body{
  margin:0; font-family:var(--font); background:
  radial-gradient(1200px 600px at 20% -20%, rgba(91,140,255,.22), transparent 60%),
  radial-gradient(900px 500px at 100% 0%, rgba(45,212,191,.18), transparent 55%), var(--bg);
  color:var(--text); min-height:100vh; display:flex; align-items:center; justify-content:center; padding:18px;
}
.app{width:min(980px,100%); height:min(82vh,760px); display:flex; flex-direction:column; gap:12px;}
.card{
  background: linear-gradient(180deg, rgba(18,25,35,.92), rgba(15,22,32,.88));
  border:1px solid var(--border); border-radius:var(--radius); box-shadow: var(--shadow);
  min-height:0;
}
.topbar{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding:12px 14px;
}
.brand{display:flex; align-items:center; gap:10px; min-width:0;}
.logo{
  width:34px; height:34px; border-radius:10px; background: rgba(255,255,255,.06);
  display:grid; place-items:center; overflow:hidden; border:1px solid rgba(255,255,255,.10);
  position:relative;
}
.logo img{width:100%; height:100%; object-fit:cover; display:block}
.logo .logo-text{display:none; font-weight:900; font-size:12px; letter-spacing:.6px; color:rgba(233,238,246,.9);}
.logo.logo-fallback .logo-text{display:block;}
.title{display:flex; flex-direction:column; line-height:1.1; min-width:0;}
.title b{font-size:16px; letter-spacing:.2px}
.title span{font-size:12px; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
.me{display:flex; align-items:center; gap:10px; flex-wrap:wrap; justify-content:flex-end;}
.pill{
  display:inline-flex; align-items:center; gap:8px; padding:7px 10px; border-radius:999px;
  border:1px solid var(--border); background: rgba(255,255,255,.04); color:var(--muted); font-size:12px;
}
.pill strong{color:var(--text); font-weight:650}
.btn{
  appearance:none; border:1px solid var(--border); background: rgba(255,255,255,.05);
  color:var(--text); padding:8px 10px; border-radius:10px; cursor:pointer; font-weight:650;
  transition:.12s transform ease, .12s background ease, .12s border-color ease;
}
.btn:hover{transform: translateY(-1px); background: rgba(255,255,255,.08); border-color: rgba(91,140,255,.5);}
.btn:active{transform: translateY(0px);}
.btn.primary{background: rgba(91,140,255,.16); border-color: rgba(91,140,255,.35);}
.btn.primary:hover{background: rgba(91,140,255,.22);}

.main{flex:1; display:grid; grid-template-columns: 1fr 320px; gap:12px; min-height:0;}
@media (max-width: 900px){
  .main{grid-template-columns:1fr;}
  .side{order:-1;}
}
.chat{display:flex; flex-direction:column; min-height:0;}
.chatlog{
  flex:1; overflow:auto; padding:14px; display:flex; flex-direction:column; gap:10px;
}
.msg{display:flex; gap:10px; align-items:flex-start;}
.avatar{
  width:34px; height:34px; border-radius:10px; background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.10); display:grid; place-items:center; flex:0 0 auto;
  color: rgba(233,238,246,.85); font-weight:900; font-size:12px;
}
.bubble{
  flex:1; background: rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:10px 12px;
}
.meta{display:flex; align-items:baseline; gap:8px; flex-wrap:wrap; margin-bottom:4px;}
.name{font-weight:800; letter-spacing:.2px}
.time{font-size:12px; color:var(--muted);}
.text{white-space:pre-wrap; word-break:break-word;}

.composer{
  display:flex; gap:10px; padding:12px 14px; border-top:1px solid rgba(255,255,255,.06);
}
.input{
  flex:1; padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.18); color:var(--text); outline:none;
}
.input:focus{border-color: rgba(91,140,255,.5); box-shadow: 0 0 0 4px rgba(91,140,255,.12);}
.footnote{padding:0 14px 12px; font-size:12px; color:var(--muted);}
.side{padding:14px;}
.side h3{margin:0 0 8px}
.side ul{margin:0 0 10px 18px; color:var(--muted);}
.side p{color:var(--text); margin:0 0 10px;}
.side .muted{color:var(--muted);}
.side hr{border:none; border-top:1px solid rgba(255,255,255,.08); margin:14px 0;}

/* Modal */
.modal{position:fixed; inset:0; display:none; align-items:center; justify-content:center; padding:18px;}
.modal.show{display:flex;}
.modal-backdrop{position:absolute; inset:0; background: rgba(0,0,0,.55);}
.modal-card{position:relative; width:min(520px, 100%); padding:16px;}
.modal-card h2{margin:0 0 6px;}
.nameform{display:flex; gap:10px; margin-top:10px;}
.error{margin-top:10px; color: var(--danger); font-size:13px; min-height:18px;}
